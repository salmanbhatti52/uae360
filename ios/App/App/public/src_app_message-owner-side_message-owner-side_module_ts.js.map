{"version":3,"file":"src_app_message-owner-side_message-owner-side_module_ts.js","mappings":"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","sources":["./src/app/message-owner-side/message-owner-side-routing.module.ts","./src/app/message-owner-side/message-owner-side.module.ts","./src/app/message-owner-side/message-owner-side.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MessageOwnerSidePage } from './message-owner-side.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MessageOwnerSidePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MessageOwnerSidePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MessageOwnerSidePageRoutingModule } from './message-owner-side-routing.module';\n\nimport { MessageOwnerSidePage } from './message-owner-side.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MessageOwnerSidePageRoutingModule\n  ],\n  declarations: [MessageOwnerSidePage]\n})\nexport class MessageOwnerSidePageModule {}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { ApiService } from '../services/api.service';\nimport { CheckUserService } from '../check-user.service';\nimport { ActivatedRoute, Router } from '@angular/router';\n// import { interval } from 'rxjs';\nimport { IonContent, IonTextarea } from '@ionic/angular';\n\n@Component({\n  selector: 'app-message-owner-side',\n  templateUrl: './message-owner-side.page.html',\n  styleUrls: ['./message-owner-side.page.scss'],\n})\nexport class MessageOwnerSidePage implements OnInit {\n  chat_ids:any;\n  messages: any;\n  companyId: any;\n  companyName:any;\n  @ViewChild(IonContent) content: IonContent; \n  @ViewChild(IonTextarea) textarea: IonTextarea; \n  companyOnline: any;\n  interval:any;\n  previousMsgsCount: any;\n  NewMsgsCount: any;\n  constructor(public location:Location,\n    public api:ApiService,\n    public checkUser:CheckUserService,\n    public router:Router,\n    public acitvatedRoute:ActivatedRoute) { \n\n  }\n  ionViewWillEnter(){\n    this.interval = setInterval(() => {\n      this.getMessagesAgain();\n    },3000);\n  }\n  ionViewWillLeave() {\n    clearInterval(this.interval);\n    console.log('leave view');\n  }\n  ngOnInit() {\n    \n    this.companyId = this.acitvatedRoute.snapshot.params['company_id'];\n    console.log('companyId: ', this.companyId);\n    this.companyName = this.acitvatedRoute.snapshot.params['company_name'];\n    console.log('company name: ',this.companyName);\n    this.companyOnline = this.acitvatedRoute.snapshot.params['company_online'];\n    console.log('company name: ',this.companyName);\n    \n    this.getMessages();\n    this.updateMessages(); \n  }\n  callFunction(){\n    this.content.scrollToBottom(0);\n  }\n  getMessages(){\n    \n    let data = {\n      requestType:\"getMessages\",\n      userId:this.checkUser.appUserId,\n      otherUserId:this.companyId,\n    }\n    console.log('Data: ',data);\n    this.api.showLoading();\n    this.api.sendRequest('Chat',data).subscribe((res:any)=>{\n      this.api.hideLoading();\n      console.log(\"Response: \",res);\n      if(res.status == 'success'){\n        this.messages = res.data;\n        this.previousMsgsCount = res.data.length\n        this.callFunction();\n      }\n    },(err)=>{\n      this.api.hideLoading();\n      console.log(\"Error: \",err);\n      \n    })\n  }\n  getMessagesAgain(){\n    \n    let data = {\n      requestType:\"getMessages\",\n      userId:this.checkUser.appUserId,\n      otherUserId:this.companyId,\n    }\n    console.log('Data: ',data);\n    \n    this.api.sendRequest('Chat',data).subscribe((res:any)=>{\n      \n      console.log(\"Response: \",res);\n      if(res.status == 'success'){\n        this.messages = res.data;\n        this.NewMsgsCount = res.data.length;\n        if(this.previousMsgsCount < this.NewMsgsCount){\n          this.callFunction();\n          this.previousMsgsCount = this.NewMsgsCount\n        }\n        \n      }\n    },(err)=>{\n      console.log(\"Error: \",err);\n      \n    })\n  }\n  sendMessage(msg){\n    console.log('user Typed Message: ',msg);\n    \n    let data = {\n      requestType:\"sendMessage\",\n      sender_type:\"Users\",\n      userId:this.checkUser.appUserId,\n      otherUserId:this.companyId,\n      content:msg,\n      messageType:\"1\"\n    }\n    console.log('data: ',data);\n    this.api.sendRequest('Chat',data).subscribe((res:any)=>{\n      console.log('Send Message API Response: ',res);\n      if(res.status == 'success'){\n        console.log(\"API Success Response: \",res.message);\n        this.getMessages();\n      }\n    },(err)=>{\n      console.log(\"Error: \",err);\n      \n    });\n    this.textarea.value = '';\n  }\n  updateMessages(){\n    let data = {\n      requestType:\"updateMessages\",\n      userId:this.checkUser.appUserId,\n      otherUserId:this.companyId\n    }\n    console.log(\"upadteMessageData: \",data);\n    \n    this.api.sendRequest(\"Chat\",data).subscribe((res:any)=>{\n      console.log('upadteMessagesApiResponse: ',res);\n      if(res.status == 'success'){\n        console.log(\"Message updated.\");\n        this.callFunction();\n        \n      }\n    },(err)=>{\n      console.log(\"Error: \",err);\n      \n    });\n  }\n  goBack(){\n    this.router.navigate(['/messages']);\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}