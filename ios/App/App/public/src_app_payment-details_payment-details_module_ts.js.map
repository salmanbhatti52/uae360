{"version":3,"file":"src_app_payment-details_payment-details_module_ts.js","mappings":"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","sources":["./src/app/payment-details/payment-details-routing.module.ts","./src/app/payment-details/payment-details.module.ts","./src/app/payment-details/payment-details.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PaymentDetailsPage } from './payment-details.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PaymentDetailsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PaymentDetailsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PaymentDetailsPageRoutingModule } from './payment-details-routing.module';\n\nimport { PaymentDetailsPage } from './payment-details.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PaymentDetailsPageRoutingModule\n  ],\n  declarations: [PaymentDetailsPage]\n})\nexport class PaymentDetailsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { NewPaymentMethodPage } from '../new-payment-method/new-payment-method.page';\nimport { BookedPage } from '../booked/booked.page';\nimport { ModalController } from '@ionic/angular';\nimport { loadScript } from \"@paypal/paypal-js\";\nimport { ApiService } from '../services/api.service';\nimport { Stripe } from '@awesome-cordova-plugins/stripe/ngx';\nimport { CheckUserService } from '../check-user.service';\nimport Cleave from 'node_modules/cleave.js/dist/cleave-esm.min.js';\n@Component({\n  selector: 'app-payment-details',\n  templateUrl: './payment-details.page.html',\n  styleUrls: ['./payment-details.page.scss'],\n})\nexport class PaymentDetailsPage implements OnInit {\n  [x: string]: any;\n  master = false;\n  visa = false;\n  paypal = false;\n  paymentMethodsData = true;\n  paymentAmount: string = this.api.bookingResponse.total_cost;\n  // paymentAmount: string = '10';\n  currency: string = 'USD';\n  paid_username:any;\n  card: any;\n  cardType = '';\n  cardNumber = '';\n  cardsList = [];\n  selected = 0;\n  payPalPaymentDetails: any;\n  bookingId:any;\n  tokenId:any;\n  selectedCard:any;\n  errorMessage = 'Transaction for this booking already exists.';\n  constructor(public location:Location,\n    public modalCtrlr:ModalController,\n    public api:ApiService,\n    private stripe: Stripe,\n    public checkUser:CheckUserService\n    ) {\n      this.stripe.setPublishableKey('pk_test_51MQ37qDFPlDlGxkdw91wUybcouQFM0EOUev6HlGRi86QjYCu3tITcy1KzcDJGrSncQ8G2rHYxPmiDAm4Y027ff6g00Es0yT7y1');\n     }\n\n  ngOnInit() {\n    this.paid_username = undefined\n    this.renderPayWithPaypal();\n  }\n  ionViewWillEnter(){\n    this.getToken();\n    this.getCardsList();\n    console.log(this.api.bookingResponse);\n    \n    this.bookingId = this.api.bookingResponse.booking_id;\n    console.log('Booking Id: ',this.bookingId);\n    \n  }\n  \n  goBack(){\n    this.location.back();\n  }\n\n  getCardsList(){\n    this.paymentMethodsData = true\n    let data = {\n      appuser_id:this.checkUser.appUserId\n    }\n    this.api.showLoading();\n    this.api.sendRequest('get_cards_list',data).subscribe((res:any)=>{\n      // console.log(\"Response: \",res);\n      if(res.status == 'success'){\n        this.cardsList = res.data;\n        // console.log(\"card list: \",this.cardsList);\n        \n        var creditCardType = require(\"credit-card-type\");\n       \n        for(let data of this.cardsList){\n          data.sm_card_number = data.card_number.substring(0,4)\n          let visaCards = creditCardType(data.card_number);\n          // console.log(visaCards);\n          if(visaCards.length != 0){\n            data.card_type = visaCards[0].type;\n          }else{\n            data.card_type = 'unknown'\n          }\n        }\n        // console.log(\"card list: \",this.cardsList);\n        this.selectedCard = this.cardsList[0]\n        this.api.hideLoading();\n        if(this.cardsList.length == 0){\n          this.paymentMethodsData = false\n        }\n      }\n      \n    },(err)=>{\n      this.api.hideLoading();\n      console.log(\"Api error\",err);\n      \n    })\n     \n  }\n\n  getToken(){\n    let card = {\n      number: '4242424242424242',\n      expMonth: 12,\n      expYear: 2025,\n      cvc: '220'\n    }\n     \n    this.stripe.createCardToken(card).then(token => {\n      // console.log(\"token.id: \",token.id);\n      this.tokenId = token.id\n      // console.log(\"this.tokenId: \",this.tokenId);\n    })\n    .catch(error => {\n      console.error(\"error: \",error);\n      this.api.presentToast(error);\n    });\n  }\n\n  selectMethod(val,cardData){\n    console.log(val);\n    this.selected = val;\n    this.selectedCard = cardData\n  }\n  makePayment(){\n    if(this.paymentAmount != '0'){\n      let data = {\n        booking_id:this.bookingId,\n        payment_gateways:\"Credit Card\",\n        payer_name:this.selectedCard.holder_name,\n        paid_amount:this.paymentAmount,\n        token_id:this.tokenId,\n        currency:\"USD\",\n        gateway_status:\"Pending\",\n        transactions_status:\"Pending\"\n      }\n      // console.log(\"Data: \",data);\n  \n      this.api.sendRequest(\"storeCarsBookingTransactions\",data).subscribe((res:any)=>{\n        // console.log(\"Response: \",res);\n        if(res.status == 'success'){\n          this.paymentAmount = '0';\n          this.openBookedModal();\n        }else if(res.status == 'error'){\n          this.api.presentToast(res.message)\n          this.paymentAmount = '0';\n          this.openBookedModal();\n        }else{\n          \n        }\n      },(err)=>{\n        console.log(\"Api Error: \",err);\n        \n      })\n    }else{\n      this.api.presentToast(this.errorMessage);\n      this.openBookedModal();\n    }\n   \n    \n  }\n \n  async openBookedModal(){\n    \n    const modal  = await this.modalCtrlr.create({\n      component:BookedPage,\n      showBackdrop:true,\n      cssClass:'booked_modal'\n    });\n    modal.present();\n    // else{\n    //   this.api.presentToast('Hmm! You forgot to pay the amount.')\n    // }\n    \n    //   \"client-id\": 'ARQ1XpBx7JkSr3FZEhw7dnUGMS_gmTuDq-oHta6H3S89qx23gtBpaWGSYqw7ql6BpUseTIKD58dS40Wz',\n    //   \"data-page-type\": \"checkout\",\n    //   currency: \"USD\",\n    //   components: \"buttons,marks,messages\"\n  }\n\n  async renderPayWithPaypal(){\n    let _this = this;\n    setTimeout(async () => {\n      \n      // Render the PayPal button into #paypal-button-container\n      <any>window['paypal'].Buttons({\n\n        // Set up the transaction\n        createOrder: function (data, actions) {\n          if(_this.paymentAmount == '0'){\n            _this.api.presentToast(_this.errorMessage);\n            _this.openBookedModal();\n          }\n          return actions.order.create({\n            purchase_units: [{\n              amount: {\n                value: _this.paymentAmount\n              }\n            }]\n          });\n        },\n\n        // Finalize the transaction\n        onApprove: function (data, actions) {\n          return actions.order.capture()\n            .then(function (details) {\n              // console.log(\"PayPal Payment Details: \",details);\n              _this.payPalPaymentDetails = details;\n             \n              // if(_this.paymentAmount != '0'){\n                // Show a success message to the buyer\n                alert('Transaction completed by ' + details.payer.name.given_name + '!');\n                // console.log('amount: ',_this.paymentAmount);\n                _this.paymentAmount = '0'\n                // console.log('amount: ',_this.paymentAmount);\n              // }\n              // else{\n              //   this.api.presentToast(_this.errorMessage);\n              // }\n              _this.sendPayPalDetails();\n            })\n            .catch(err => {\n              console.log(err);\n            })\n        }\n      }).render('#your-container-element');\n      \n      \n    }, 500)\n   \n    // this.api.presentToast(_this.errorMessage);\n  }\n\n  sendPayPalDetails(){\n      \n    let data = {\n      booking_id:this.bookingId,\n      payment_gateways:\"Paypal\",\n      payer_paypal_email:this.payPalPaymentDetails.payer.eamil_address,\n      payer_name:this.payPalPaymentDetails.payer.name.given_name,\n      paid_amount:this.payPalPaymentDetails.purchase_units[0].amount.value,\n      payee_paypal_email:this.payPalPaymentDetails.purchase_units[0].payee.email_address,\n      gateway_status:this.payPalPaymentDetails.purchase_units[0].payments.captures[0].status,\n      transactions_status:this.payPalPaymentDetails.status\n    }\n    // console.log(\"Data: \",data);\n    this.api.showLoading();\n    this.api.sendRequest(\"storeCarsBookingTransactions\",data).subscribe((res:any)=>{\n      // console.log(\"Response: \",res);\n      this.api.hideLoading();\n      if(res.status == 'success'){\n        this.openBookedModal();\n      }else if(res.status == 'error'){\n        this.openBookedModal();\n        this.api.presentToast(res.message)\n      }else{\n\n      }\n    },(err)=>{\n      this.api.hideLoading();\n      console.log(\"Api Error: \",err);\n      \n    })\n  }\n  \n\n  \n  async addPaymentMethod(){\n    const modal = await this.modalCtrlr.create({\n      component:NewPaymentMethodPage,\n      showBackdrop:true,\n      cssClass:'add_payment_method'\n    });\n    modal.present();\n    const {data,role} = await modal.onWillDismiss();\n    if(role == 'status'){\n      const status = data;\n      // console.log(status);\n      this.getCardsList();\n      \n    }\n  }\n\n  ionViewWillLeave(){\n    console.log('leave view');\n    this.paid_username = '';\n  }\n}\n"],"names":["Component","Location","NewPaymentMethodPage","BookedPage","ModalController","ApiService","Stripe","CheckUserService","PaymentDetailsPage","constructor","location","modalCtrlr","api","stripe","checkUser","bookingResponse","total_cost","setPublishableKey","ngOnInit","paid_username","undefined","renderPayWithPaypal","ionViewWillEnter","getToken","getCardsList","console","log","bookingId","booking_id","goBack","back","paymentMethodsData","data","appuser_id","appUserId","showLoading","sendRequest","subscribe","res","status","cardsList","creditCardType","require","sm_card_number","card_number","substring","visaCards","length","card_type","type","selectedCard","hideLoading","err","card","number","expMonth","expYear","cvc","createCardToken","then","token","tokenId","id","catch","error","presentToast","selectMethod","val","cardData","selected","makePayment","paymentAmount","payment_gateways","payer_name","holder_name","paid_amount","token_id","currency","gateway_status","transactions_status","openBookedModal","message","errorMessage","modal","create","component","showBackdrop","cssClass","present","_this","setTimeout","window","Buttons","createOrder","actions","order","purchase_units","amount","value","onApprove","capture","details","payPalPaymentDetails","alert","payer","name","given_name","sendPayPalDetails","render","payer_paypal_email","eamil_address","payee_paypal_email","payee","email_address","payments","captures","addPaymentMethod","role","onWillDismiss","ionViewWillLeave","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}