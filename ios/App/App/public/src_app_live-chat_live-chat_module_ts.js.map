{"version":3,"file":"src_app_live-chat_live-chat_module_ts.js","mappings":"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","sources":["./src/app/live-chat/live-chat-routing.module.ts","./src/app/live-chat/live-chat.module.ts","./src/app/live-chat/live-chat.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LiveChatPage } from './live-chat.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LiveChatPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LiveChatPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LiveChatPageRoutingModule } from './live-chat-routing.module';\n\nimport { LiveChatPage } from './live-chat.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LiveChatPageRoutingModule\n  ],\n  declarations: [LiveChatPage]\n})\nexport class LiveChatPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { CheckUserService } from '../check-user.service';\nimport { ApiService } from '../services/api.service';\n\n@Component({\n  selector: 'app-live-chat',\n  templateUrl: './live-chat.page.html',\n  styleUrls: ['./live-chat.page.scss'],\n})\nexport class LiveChatPage implements OnInit {\n  interval:any;\n  adminsList:any;\n  selectedAdmin: any;\n  adminId: any;\n\n  constructor(public navCtrlr:NavController,\n    public api:ApiService,\n    public checkUser:CheckUserService,\n    public router:Router) { }\n\n  ngOnInit() {\n    \n  }\n\n  ionViewWillEnter(){\n    this.getAdminsList();\n    this.getAllChatLive();\n  }\n \n  ionViewWillLeave(){\n    console.log('leave view');\n  }\n\n  getAdminsList(){\n    this.api.getData(\"GetAdmins\").subscribe((res:any)=>{\n      console.log(\"Resposne: \",res);\n      if(res.status == 'success'){\n        this.adminsList = res.data;\n        console.log(\"adminsList: \",this.adminsList);\n      }\n    },(err)=>{\n      console.log(\"Api Error: \",err);\n      \n    })\n\n  }\n\n  getAllChatLive(){\n    let data ={\n      appUserId: this.checkUser.appUserId\n    }\n    this.api.sendRequest(\"getAllChatLive\",data).subscribe((res:any)=>{\n      console.log(\"Resposne: \",res);\n      if(res.status == 'success'){\n        if(res.data.length > 0){\n          this.adminId = res.data[0].sender_id\n          console.log(\"Admin Id: \",this.adminId);\n        }\n        \n          \n      }\n\n    },(err)=>{\n      console.log(\"Api Error: \",err);\n      \n    })\n  }\n\n  startLiveChat(){\n    console.log(\"Admin Id: \",this.adminId);\n    \n    if(this.adminId === undefined){\n      let arrayLength = this.adminsList.length\n      console.log(\"arrayLength: \",arrayLength);\n      let randomValue = Math.floor(Math.random() * arrayLength)\n      console.log(\"randomValue: \",randomValue);\n      this.selectedAdmin = this.adminsList[randomValue];\n      console.log(\"Selected Admin: \",this.selectedAdmin);\n      \n      let data ={\n        requestType:\"startChat\",\n        userId:this.checkUser.appUserId,\n        otherUserId:this.selectedAdmin.users_system_id\n      }\n      this.api.sendRequest(\"ChatLive\",data).subscribe((res:any)=>{\n        console.log(\"Resposne: \",res);\n        if(res.status == 'success'){\n\n          this.router.navigate(['/live-chat-screen',{   \n            selected_admin: this.selectedAdmin.users_system_id\n          }]);\n\n        }\n\n      },(err)=>{\n        console.log(\"Api Error: \",err);\n        \n      })\n    }else{\n      this.router.navigate(['/live-chat-screen',{   \n        selected_admin: this.adminId\n      }]);\n      \n    }\n    \n    \n  }\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}